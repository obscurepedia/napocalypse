{% extends "quiz_base.html" %}

{% block title %}Sleep Quiz - Napocalypse{% endblock %}

{% block content %}
    <!-- Quiz Container -->
    <section class="quiz-section">
        <div class="container">
            <div class="quiz-intro" id="quiz-intro">
                <h1>Get Your Personalized Baby Sleep Plan</h1>
                <p class="lead">Every baby is different. Every family is different. That's why generic sleep advice doesn't work.</p>
                <p>Take this 2-minute quiz to discover:</p>
                <ul class="quiz-benefits">
                    <li>âœ“ The exact sleep training method that fits YOUR parenting style</li>
                    <li>âœ“ A custom plan for your baby's age and sleep challenges</li>
                    <li>âœ“ Solutions tailored to your living situation and schedule</li>
                    <li>âœ“ A clear, step-by-step guide (no more overwhelm!)</li>
                </ul>
                <p class="quiz-cta-text">No more guessing. No more information overload. Just a personalized plan that works for YOUR family.</p>
                <button class="btn-primary btn-large" onclick="startQuiz()">Start My Personalized Quiz â†’</button>
            </div>

            <div class="quiz-container" id="quiz-container" style="display: none;">
                <!-- Progress Bar -->
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <p class="progress-text" id="progress-text">Question 1 of 8</p>

                <!-- Quiz Form -->
                <form id="quiz-form">
                    <!-- Question 1: Baby's Age -->
                    <div class="question" id="question-1">
                        <h2>ğŸ‘¶ How old is your baby?</h2>
                        <p class="question-subtitle">This helps us recommend age-appropriate sleep methods and schedules.</p>
                        <div class="options">
                            <button type="button" class="option-btn" onclick="selectOption(1, '0-3 months')">
                                <strong>â­ 0-3 months (newborn)</strong>
                                <span>Still establishing basic sleep patterns</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(1, '4-6 months')">
                                <strong>ğŸŒ™ 4-6 months (ready for sleep training)</strong>
                                <span>Ready for more structured sleep training</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(1, '7-12 months')">
                                <strong>ğŸ§¸ 7-12 months (established sleeper)</strong>
                                <span>Dealing with developmental changes</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(1, '13-18 months')">
                                <strong>ğŸš¶ 13-18 months (toddler)</strong>
                                <span>Managing bedtime resistance and transitions</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(1, '19-24 months')">
                                <strong>ğŸˆ 19-24 months (advanced toddler)</strong>
                                <span>Complex sleep challenges and behavior</span>
                            </button>
                        </div>
                    </div>

                    <!-- Question 2: Sleep Situation -->
                    <div class="question" id="question-2" style="display: none;">
                        <h2>ğŸ˜´ What's your biggest sleep struggle right now?</h2>
                        <p class="question-subtitle">Be honest - we've heard it all! This helps us prioritize what matters most to you.</p>
                        <div class="options">
                            <button type="button" class="option-btn" onclick="selectOption(2, 'wakes_every_1-2_hours')">
                                <strong>ğŸ˜« Wakes every 1-2 hours (I'm exhausted!)</strong>
                                <span>Multiple wakings throughout the night</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(2, 'wakes_3-5_times')">
                                <strong>ğŸ˜´ Wakes 3-5 times per night (need better sleep)</strong>
                                <span>Frequent night wakings disrupting rest</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(2, 'wakes_1-2_times')">
                                <strong>ğŸŒ… Wakes 1-2 times per night (almost there!)</strong>
                                <span>Close to sleeping through the night</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(2, 'takes_30min_to_sleep')">
                                <strong>â° Takes 30+ minutes to fall asleep (bedtime battles)</strong>
                                <span>Long, difficult bedtime routines</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(2, 'early_morning_waking')">
                                <strong>ï¿½ Early morning wake-ups (before 6am)</strong>
                                <span>Baby wakes too early and won't go back to sleep</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(2, 'naps_disaster')">
                                <strong>ğŸ˜© Naps are a complete disaster</strong>
                                <span>Daytime sleep is impossible</span>
                            </button>
                        </div>
                    </div>

                    <!-- Question 3: Sleep Philosophy -->
                    <div class="question" id="question-3" style="display: none;">
                        <h2>ğŸ’­ What's your comfort level with sleep training methods?</h2>
                        <p class="question-subtitle">There's no right or wrong answer - we'll match you with methods that feel right for YOUR family.</p>
                        <div class="options">
                            <button type="button" class="option-btn" onclick="selectOption(3, 'comfortable_with_crying')">
                                <strong>ğŸ’ª Comfortable with some crying (I can handle cry-it-out methods)</strong>
                                <span>Ready for faster but more intense methods</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(3, 'prefer_gentle')">
                                <strong>ğŸ¤— Prefer gentle/no-cry methods only (I want the softest approach)</strong>
                                <span>Gradual approach with minimal crying</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(3, 'willing_gradual')">
                                <strong>ğŸŒŸ Willing to try gradual methods with minimal crying (somewhere in between)</strong>
                                <span>Balanced approach that feels manageable</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(3, 'not_sure')">
                                <strong>ğŸ¤” Not sure yet (help me understand my options)</strong>
                                <span>Need guidance on which approach to choose</span>
                            </button>
                        </div>
                    </div>

                    <!-- Question 4: Living Situation -->
                    <div class="question" id="question-4" style="display: none;">
                        <h2>ğŸ  Where does your baby sleep?</h2>
                        <p class="question-subtitle">This helps us recommend methods that work with your space and noise concerns.</p>
                        <div class="options">
                            <button type="button" class="option-btn" onclick="selectOption(4, 'apartment')">
                                <strong>ğŸ¢ Apartment or shared walls (need quiet methods)</strong>
                                <span>Noise concerns with neighbors</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(4, 'house_separate_nursery')">
                                <strong>ğŸ  House with separate nursery (more flexibility)</strong>
                                <span>Baby has own room, more method options</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(4, 'room_sharing_baby')">
                                <strong>ğŸ‘¶ Room sharing with baby in our room (special considerations)</strong>
                                <span>Need methods that work with room sharing</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(4, 'room_sharing_siblings')">
                                <strong>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Room sharing with siblings (complex situation)</strong>
                                <span>Multiple children in same room</span>
                            </button>
                        </div>
                    </div>

                    <!-- Question 5: Parenting Setup -->
                    <div class="question" id="question-5" style="display: none;">
                        <h2>ğŸ’¼ Who handles nighttime duties?</h2>
                        <p class="question-subtitle">Understanding your support system helps us create a sustainable plan.</p>
                        <div class="options">
                            <button type="button" class="option-btn" onclick="selectOption(5, 'two_parents_sharing')">
                                <strong>ğŸ‘« Two parents sharing duties (we can tag-team)</strong>
                                <span>Both parents available for support</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(5, 'single_parent')">
                                <strong>ğŸ™‹ Single parent doing it all (need simpler methods)</strong>
                                <span>Managing everything alone</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(5, 'one_parent_nights')">
                                <strong>ğŸ‘¤ One parent does all nights (need sustainable approach)</strong>
                                <span>One parent handles all sleep responsibilities</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(5, 'grandparents_involved')">
                                <strong>ğŸ‘µ Grandparents/caregivers involved (need consistent plan)</strong>
                                <span>Multiple caregivers need coordinated approach</span>
                            </button>
                        </div>
                    </div>

                    <!-- Question 6: Work Schedule -->
                    <div class="question" id="question-6" style="display: none;">
                        <h2>ğŸ’¼ What's your work situation?</h2>
                        <p class="question-subtitle">This helps us understand your timeline and energy levels.</p>
                        <div class="options">
                            <button type="button" class="option-btn" onclick="selectOption(6, 'stay_at_home')">
                                <strong>ğŸ¡ Stay-at-home parent (more flexible schedule)</strong>
                                <span>Can adapt schedule as needed</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(6, 'working_parent')">
                                <strong>ğŸ’¼ Working parent (need results before returning to work)</strong>
                                <span>Time pressure for sleep improvements</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(6, 'shift_work')">
                                <strong>ğŸŒ™ Shift work/irregular hours (need adaptable methods)</strong>
                                <span>Variable schedule requires flexibility</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(6, 'work_from_home')">
                                <strong>ğŸ’» Work from home (different constraints)</strong>
                                <span>Home during day with work responsibilities</span>
                            </button>
                        </div>
                    </div>

                    <!-- Question 7: Biggest Challenge -->
                    <div class="question" id="question-7" style="display: none;">
                        <h2>ğŸŒŸ What's the #1 thing preventing your baby from sleeping well?</h2>
                        <p class="question-subtitle">We'll make sure your personalized guide focuses on solving THIS specific problem.</p>
                        <div class="options">
                            <button type="button" class="option-btn" onclick="selectOption(7, 'wont_sleep_without_feeding')">
                                <strong>ğŸ¼ Won't fall asleep without feeding</strong>
                                <span>Feeding is required for every sleep</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(7, 'wont_sleep_without_rocking')">
                                <strong>ğŸ¤± Won't fall asleep without rocking/holding</strong>
                                <span>Physical contact needed for sleep</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(7, 'wakes_when_put_down')">
                                <strong>ğŸ˜± Wakes up the moment I put them down</strong>
                                <span>Transfer from arms to crib fails</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(7, 'bedtime_takes_over_hour')">
                                <strong>â³ Bedtime routine takes over an hour</strong>
                                <span>Extremely long, exhausting bedtimes</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(7, 'naps_impossible')">
                                <strong>ğŸ˜´ Naps are impossible</strong>
                                <span>Daytime sleep is completely unsuccessful</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(7, 'wakes_too_early')">
                                <strong>ğŸŒ… Wakes up too early (before 6am)</strong>
                                <span>Day starts too early despite good bedtime</span>
                            </button>
                        </div>
                    </div>

                    <!-- Question 8: Sleep Associations + Email -->
                    <div class="question" id="question-8" style="display: none;">
                        <h2>ğŸ“§ How does your baby currently fall asleep?</h2>
                        <p class="question-subtitle">Understanding current habits helps us create a realistic transition plan.</p>
                        <div class="options">
                            <button type="button" class="option-btn" onclick="selectOption(8, 'nursing_bottle')">
                                <strong>ğŸ¼ Nursing or bottle to sleep</strong>
                                <span>Feeding is the primary sleep association</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(8, 'rocking_bouncing')">
                                <strong>ğŸ¤— Rocking, bouncing, or holding to sleep</strong>
                                <span>Motion and contact needed for sleep</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(8, 'pacifier')">
                                <strong>ğŸ˜´ Pacifier dependency</strong>
                                <span>Can't sleep without pacifier</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(8, 'cosleeping')">
                                <strong>ğŸ›ï¸ Co-sleeping (want to transition to crib)</strong>
                                <span>Currently bed-sharing, want independence</span>
                            </button>
                            <button type="button" class="option-btn" onclick="selectOption(8, 'multiple')">
                                <strong>ğŸ”„ Multiple associations (it's complicated!)</strong>
                                <span>Combination of several sleep dependencies</span>
                            </button>
                        </div>

                        <!-- Email Input -->
                        <div class="email-input-container">
                            <div class="scroll-indicator" style="text-align: center; margin-bottom: 1rem; opacity: 0; transition: opacity 0.3s ease;">
                                <p style="color: #667eea; font-weight: 600;">ğŸ‘‡ Almost done! Please enter your details below ğŸ‘‡</p>
                            </div>
                            <label for="email">Enter your email to get your personalized guide:</label>
                            <input type="email" id="email" name="email" placeholder="your@email.com" required>
                            
                            <label for="name">Your name:</label>
                            <input type="text" id="name" name="name" placeholder="Your name (optional)">
                            
                            <div style="text-align: center; margin-top: 1.5rem;">
                                <button type="submit" class="btn-primary btn-large">Get My Personalized Guide â†’</button>
                            </div>
                        </div>
                    </div>
                </form>

                <!-- Loading State -->
                <div id="loading-state" style="display: none;">
                    <div class="loading-spinner"></div>
                    <p>Creating your personalized sleep guide...</p>
                </div>
            </div>
        </div>
    </section>
{% endblock %}

{% block extra_js %}
    <script src="/js/quiz.js"></script>
{% endblock %}